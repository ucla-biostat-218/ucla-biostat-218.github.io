<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-b6e6edf6cb1293d7f667c2f39c143ab5.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="author" content="Marc A Suchard @ UCLA">
  <title>OMOP CDM and Standardized Vocabularies</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-2504e1d4645b0b9d9692619f8847e2f1.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">OMOP CDM and Standardized Vocabularies</h1>
  <p class="subtitle">Biostat 218</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Marc A Suchard @ UCLA 
</div>
</div>
</div>

</section>
<section id="introduction" class="slide level2">
<h2>Introduction</h2>
<p>In these lectures we will learn:</p>
<ul>
<li><p>What are standard / common data models?</p></li>
<li><p>Why an OMOP CDM?</p></li>
<li><p>How is the OMOP CDM normalized?</p></li>
<li><p>About using standardized vocabularies</p></li>
<li><p>How to get observations into standard models</p></li>
</ul>
</section>
<section id="data-models-are-everywhere" class="slide level2">
<h2>Data models are everywhere</h2>
<p><span class="math inline">\(\ldots\)</span> but mostly implicit</p>
<div class="quarto-layout-panel" data-layout="[50,50]">
<div class="quarto-layout-row">
<div id="first-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Purpose</strong></p>
<ul>
<li><p>To build software</p></li>
<li><p>To share data</p></li>
</ul>
</div>
<div id="second-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Attributes</strong></p>
<ul>
<li><p>Relational models</p></li>
<li><p>Normalized models</p></li>
<li><p>Closed-world models</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="what-makes-a-model-standard" class="slide level2">
<h2>What makes a model standard?</h2>
<div class="quarto-layout-panel" data-layout="[ 50, 50 ]">
<div class="quarto-layout-row">
<div id="first-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Data models</strong></p>
<ul>
<li><p>Software controls the data</p></li>
<li><p>Value of software <span class="math inline">\(\gg\)</span> data</p></li>
<li><p>Data come to the software</p></li>
</ul>
</div>
<div id="second-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Standard data models</strong></p>
<ul>
<li><p>Data are independent</p></li>
<li><p>Value of data <span class="math inline">\(\gg\)</span> software</p></li>
<li><p>Software comes to the data</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="what-makes-a-model-standard-1" class="slide level2">
<h2>What makes a model standard?</h2>
<div class="quarto-layout-panel" data-layout="[ 50, 50 ]">
<div class="quarto-layout-row">
<div id="first-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Data models</strong></p>
<ul>
<li><p>Specific business process</p></li>
<li><p>Implicit in application</p></li>
<li><p>No name</p></li>
<li><p>Not or internally documented</p></li>
<li><p>Support as part of application</p></li>
<li><p>One stakeholder: vendor</p></li>
</ul>
</div>
<div id="second-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Standard data models</strong></p>
<ul>
<li><p>Broad set of use cases</p></li>
<li><p>Explicit, independent of one application</p></li>
<li><p>Branded</p></li>
<li><p>Thoroughly documented</p></li>
<li><p>Independently supported</p></li>
<li><p>Many stakeholders</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="examples-of-data-models-in-healthcare" class="slide level2 scrollable">
<h2>Examples of data models in healthcare</h2>
<!-- ::: columns -->
<!-- ::: {.column width="70%"} -->
<!-- ![](images/image_1.jpg) -->
<!-- ::: -->
<!-- ::: {.column width="30%"} -->
<!-- ![](images/image_2.jpg) -->
<!-- ![](images/image_3.jpg) -->
<!-- ::: -->
<!-- ::: -->
<div class="quarto-layout-panel" data-layout="[ 50, 50 ]">
<div class="quarto-layout-row">
<div id="first-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><strong>Data models</strong></p>
<!-- ![](figures/example_data_models.png){.r-stretch} -->
<p><img data-src="figures/example_data_models.png"></p>
</div>
<div id="second-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><strong>Standard data models</strong></p>
<p><img data-src="figures/example_standard_data_models.png"></p>
<ul>
<li>only one is global, and a super-set of several others</li>
</ul>
</div>
</div>
</div>
</section>
<section id="added-value-of-standard-data-models" class="slide level2">
<h2>Added value of standard data models</h2>
<div class="quarto-layout-panel" data-layout="[ 50, 50 ]">
<div class="quarto-layout-row">
<div id="first-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Data models</strong></p>
<ul>
<li><p>Objects</p></li>
<li><p>Relationship</p></li>
</ul>
</div>
<div id="second-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Standard data models</strong></p>
<ul>
<li><p>Objects</p></li>
<li><p>Relationship</p></li>
<li><p>Context</p></li>
<li><p>Conventions</p></li>
<li><p>Training</p></li>
<li><p>Test cases</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="standard-data-models-provide-interoperability" class="slide level2">
<h2>Standard data models provide interoperability</h2>

<img data-src="figures/interoperability.png" class="r-stretch"></section>
<section id="formal-logic-in-knowledge-representation" class="slide level2">
<h2>Formal logic in knowledge representation</h2>
<div class="quarto-layout-panel" data-layout="[ 50, 50 ]">
<div class="quarto-layout-row">
<div id="first-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Open-world assumption</strong></p>
<ul>
<li><p>What we know <span class="math inline">\(\ldots\)</span> is true</p></li>
<li><p>What we don’t know <span class="math inline">\(\ldots\)</span> we don’t know</p></li>
</ul>
</div>
<div id="second-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Closed-world assumption</strong></p>
<ul>
<li><p>What we know <span class="math inline">\(\ldots\)</span> is true</p></li>
<li><p>What we don’t know <span class="math inline">\(\ldots\)</span> is <em>false</em></p></li>
</ul>
</div>
</div>
</div>
<blockquote>
<p>What does it mean “what we don’t know?”</p>
</blockquote>
</section>
<section id="real-world-data-are-closed-world" class="slide level2 smaller">
<h2>Real-world data are closed-world</h2>
<p>For any given day:</p>
<ol type="1">
<li>If we see a record of something, it happened</li>
<li>If we don’t see a record of something, it did not happen</li>
</ol>
<p>which imples</p>
<ul>
<li>We must know everything that could happen for (2) to hold</li>
<li>Everything we want to record must be in a reference table:
<ul>
<li>all drugs, conditions, procedures, devices, visits, etc</li>
</ul></li>
</ul>
<blockquote>
<p>Only the closed-world assumption allows analytics</p>
<ul>
<li><p>Incidence (how many patients get a disease in a time-period over all patients)</p></li>
<li><p>Prevalence (how many patients have a disease at a time-point over all patients)</p></li>
<li><p>All prediction / epidemiological methods</p></li>
</ul>
</blockquote>
</section>
<section id="why-an-omop-standard-common-data-model" class="slide level2">
<h2>Why an OMOP standard / common data model?</h2>
<div class="quarto-layout-panel" data-layout="[ 50, 50 ]">
<div class="quarto-layout-row">
<div id="first-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="figures/citations.png"></p>
<p><br></p>
<p>Over 700 total papers using the OMOP CDM !</p>
<p><a href="https://dash.ohdsi.org/research" class="uri">https://dash.ohdsi.org/research</a></p>
</div>
<div id="second-column" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="figures/recent_papers.png"></p>
</div>
</div>
</div>
</section>
<section id="omop-cdm" class="slide level2">
<h2>OMOP CDM</h2>
<p>The OMOP CDM is a system of</p>
<ul>
<li><strong>tables</strong></li>
<li>conventions, and</li>
<li>vocabularies</li>
</ul>
<p>that allow observational health data to be standardized.</p>
<p>It is this standard approach that facilitaties rapid innovation in the areas of open-source development, methods research and evidence generation.</p>
<p><a href="https://ohdsi.github.io/CommonDataModel/index.html" class="uri">https://ohdsi.github.io/CommonDataModel/index.html</a></p>
</section>
<section id="tables" class="slide level2">
<h2>Tables</h2>
<p>The OMOP CDM is a <strong>person-centric</strong> model</p>

<img data-src="figures/person_centric.png" style="width:50.0%" class="r-stretch"></section>
<section id="tables-1" class="slide level2">
<h2>Tables</h2>
<p>A typical patient journey within a healthcare system</p>

<img data-src="figures/healthcare_journey.png" class="r-stretch"></section>
<section id="tables-2" class="slide level2">
<h2>Tables</h2>
<p>A typical patient journey within a healthcare system <strong>into data</strong></p>

<img data-src="figures/healthcare_journey_data.png" class="r-stretch"></section>
<section id="tables-3" class="slide level2 scrollable">
<h2>Tables</h2>
<p>A typical patient journey within a healthcare system <strong>into data</strong></p>
<div class="column" style="width:100%;">
<p><img data-src="figures/cdm_person.png"></p>
</div><p>All clinical event tables are linked to the <code>PERSON</code> table. Adding the date or start-date to events allows for a longitudinal view on all relevant events by person.</p>
<ul>
<li>Exception: standardized health system data tables</li>
</ul>
</section>
<section id="simple-data-model" class="slide level2">
<h2>Simple data model</h2>

<img data-src="figures/simple_data_model.png" class="r-stretch"></section>
<section id="schemas-and-data-tables" class="slide level2 scrollable">
<h2>Schemas and data tables</h2>
<p>Database schema separate between read-only and read-write tables</p>
<ul>
<li><p>CDM</p>
<ul>
<li>Clinical event tables</li>
<li>Vocabulary tables</li>
</ul></li>
<li><p>Results</p>
<ul>
<li><code>COHORT</code> (basis of analysis)</li>
<li><code>COHORT_DEFINITION</code></li>
</ul></li>
</ul>
<p>The CDM is platform-independent. Data types are basic ANSI SQL</p>
<ul>
<li><code>VARCHAR</code>, <code>BIGINT</code>, <code>INTEGER</code>, <code>FLOAT</code>, <code>DATE</code>, <code>DATETIME</code>, <code>CLOB</code></li>
</ul>
</section>
<section id="events-of-different-nature-organize-into-domains" class="slide level2">
<h2>Events of different nature organize into domains</h2>
<p>Events are stored in <code>domain-specific</code> tables and represented by <code>standard concepts</code></p>
<ul>
<li>Condition domain
<ul>
<li>signs, symptoms, diagnoses</li>
<li><code>CONDITION_OCCURRENCE</code> table</li>
</ul></li>
<li>Drug domain
<ul>
<li><code>DRUG_EXPOSURE</code> table</li>
</ul></li>
</ul>
</section>
<section id="semantic-representation-through-concepts" class="slide level2 scrollable">
<h2>Semantic representation through concepts</h2>
<p>Each record is fully <strong>normalized</strong> through concepts</p>
<ul>
<li>Unique <code>CONCEPT_ID</code> values (foreign keys to <code>CONCEPT</code> table)</li>
</ul>
<p>All CDM instances use the <em>same</em> <code>CONCEPT</code> table as a reference</p>
<ul>
<li>Chief mechanism of interoperability</li>
</ul>
<p>If a standard concept does not exist (or cannot be identified) <code>CONCEPT_ID</code> = 0</p>
</section>
<section id="normalization-in-pictures" class="slide level2">
<h2>Normalization in pictures</h2>

<img data-src="figures/normalization_keys.png" style="width:100.0%" class="r-stretch"><ul>
<li>Importance becomes (even more) obvious across data sources (language, coding systems)</li>
</ul>
</section>
<section id="field-name-conventions" class="slide level2 scrollable smaller">
<h2>Field name conventions</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">Notation</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">[Event]_ID</td>
<td style="text-align: left;">Unique identifier for each record, which serves as a foreign keys establishing relationships across Event tables. For example, PERSON_ID uniquely identifies each individual. VISIT_OCCURRENCE_ID uniquely identifies a Visit.</td>
</tr>
<tr class="even">
<td style="text-align: left;">[Event]_CONCEPT_ID</td>
<td style="text-align: left;">Foreign key to a Standard Concept record in the CONCEPT reference table. This is the main representation of the Event, serving as the primary basis for all standardized analytics. For example, CONDITION_CONCEPT_ID = <a href="http://athena.ohdsi.org/search-terms/terms/31967">31967</a> contains the reference value for the SNOMED concept of “Nausea”.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">[Event]_SOURCE _CONCEPT_ID</td>
<td style="text-align: left;">Foreign key to a record in the CONCEPT reference table. This Concept is the equivalent of the Source Value (below), and it may happen to be a Standard Concept, at which point it would be identical to the [Event]_CONCEPT_ID, or another non-standard concept. For example, CONDITION_SOURCE_CONCEPT_ID = <a href="http://athena.ohdsi.org/search-terms/terms/45431665">45431665</a> denotes the concept of “Nausea” in the Read terminology, and the analogous CONDITION_CONCEPT_ID is the Standard SNOMED-CT Concept <a href="http://athena.ohdsi.org/search-terms/terms/31967">31967</a>. The use of Source Concepts for standard analytics applications is discouraged since only Standard Concepts represent the semantic content of an Event in a unambiguous way and therefore Source Concepts are not interoperable.</td>
</tr>
<tr class="even">
<td style="text-align: left;">[Event]_TYPE_CONCEPT_ID</td>
<td style="text-align: left;">Foreign key to a record in the CONCEPT reference table, representing the origin of the source information, standardized within the Standardized Vocabularies. Note that despite the field name this is not a type of an Event, or type of a Concept, but declares the capture mechanism that created this record. For example, DRUG_TYPE_CONCEPT_ID discriminates if a Drug record was derived from a dispensing Event in the pharmacy (“Pharmacy dispensing”) or from an e-prescribing application (“Prescription written”)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">[Event]_SOURCE_VALUE</td>
<td style="text-align: left;">Verbatim code or free text string reflecting how this Event was represented in the source data. Its use is discouraged for standard analytics applications, as these Source Values are not harmonized across data sources. For example, CONDITION_SOURCE_VALUE might contain a record of “78702”, corresponding to ICD-9 code 787.02 written in a notation omitting the dot.</td>
</tr>
</tbody>
</table>
</section>
<section id="explore-the-cdm" class="slide level2">
<h2>Explore the CDM</h2>
<ul>
<li><p><a href="https://ohdsi.github.io/CommonDataModel/cdm54.html">OMOP CDM v5.4 schema</a> (link)</p></li>
<li><p><a href="https://github.com/OHDSI/CommonDataModel/blob/v5.4.0/inst/ddl/5.4/sql_server/OMOPCDM_sql_server_5.4_ddl.sql">OMOP CDM v5.4 DDL</a> (link)</p></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Data definition language (DDL)</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
<!-- ## Normalization -->
<!-- Defining "keys" (`concept_id`) and populating reference tables -->
<!-- ![](figures/normalization_keys.png) -->
</section>
<section id="database-constraints" class="slide level2">
<h2>Database constraints</h2>
<ul>
<li><p><code>NOT NULL</code>: must have a value</p></li>
<li><p><code>UNIQUE KEY</code>: value must only exist once in table</p></li>
<li><p><code>PRIMARY KEY</code>: <code>NOT NULL</code> + <code>UNIQUE KEY</code></p></li>
<li><p><code>FOREIGN KEY</code>: must have a value in a parent table / field</p></li>
<li><p><code>CHECK</code>: must check out (e.g.&nbsp;is positive)</p></li>
</ul>
<p><a href="https://github.com/OHDSI/CommonDataModel/blob/v5.4.0/inst/ddl/5.4/sql_server/OMOPCDM_sql_server_5.4_constraints.sql">OMOP CDM v5.4 constraints</a> (link)</p>
</section>
<section id="omop-cdm-1" class="slide level2">
<h2>OMOP CDM</h2>
<p>The OMOP CDM is a system of</p>
<ul>
<li>tables</li>
<li><strong>conventions</strong>, and</li>
<li>vocabularies</li>
</ul>
<p>that allow observational health data to be standardized.</p>
<p>It is this standard approach that facilitaties rapid innovation in the areas of open-source development, methods research and evidence generation.</p>
<p><a href="https://ohdsi.github.io/CommonDataModel/index.html" class="uri">https://ohdsi.github.io/CommonDataModel/index.html</a></p>
</section>
<section id="conventions" class="slide level2">
<h2>Conventions</h2>

<img data-src="figures/conventions.png" class="r-stretch"></section>
<section id="technical-conventions" class="slide level2">
<h2>Technical conventions</h2>

<img data-src="figures/fields.png" class="r-stretch"><p><a href="https://ohdsi.github.io/CommonDataModel/dataModelConventions.html">OMOP CDM v5.4 conventions</a> (link)</p>
</section>
<section id="table-specific-conventions" class="slide level2">
<h2>Table-specific conventions</h2>

<img data-src="figures/person_conventions.png" class="r-stretch"></section>
<section id="source-data-specific-conventions" class="slide level2">
<h2>Source data-specific conventions</h2>

<img data-src="figures/source_conventions.png" class="r-stretch"></section>
<section id="omop-cdm-2" class="slide level2">
<h2>OMOP CDM</h2>
<p>The OMOP CDM is a system of</p>
<ul>
<li>tables</li>
<li>conventions, and</li>
<li><strong>vocabularies</strong></li>
</ul>
<p>that allow observational health data to be standardized.</p>
<p>It is this standard approach that facilitaties rapid innovation in the areas of open-source development, methods research and evidence generation.</p>
<p><a href="https://ohdsi.github.io/CommonDataModel/index.html" class="uri">https://ohdsi.github.io/CommonDataModel/index.html</a></p>
</section>
<section id="vocabularies" class="slide level2">
<h2>Vocabularies</h2>

<img data-src="figures/cdm_voc.png" class="r-stretch"></section>
<section id="why-do-we-need-standard-concepts" class="slide level2">
<h2>Why do we need standard concepts?</h2>

<img data-src="figures/bladder_cancer_vocab.png" class="r-stretch"></section>
<section id="omop-standardized-vocabularies" class="slide level2">
<h2>OMOP standardized vocabularies</h2>

<img data-src="figures/vocab_schema.png" class="r-stretch"><div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Example DDL diagram</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="example-concept" class="slide level2">
<h2>Example concept</h2>

<img data-src="figures/example_concept.png" class="r-stretch"></section>
<section id="vocabularies-relate-ideas-concepts" class="slide level2">
<h2>Vocabularies relate ideas (concepts)</h2>

<img data-src="figures/vocab_relationships.png" class="r-stretch"><p>A semantic concept is a concept that is represented in a network of interconnected concepts</p>
</section>
<section id="mapping-to-omop-standardized-vocabularies" class="slide level2 scrollable">
<h2>Mapping to OMOP standardized vocabularies</h2>
<div class="column" style="width:100%;">
<p><img data-src="figures/source_to_standard.png"></p>
</div><p>What is standardized:</p>
<ul>
<li><p><code>[TABLE]_CONCEPT_ID</code>: standard concept to which the source code maps, <strong>used for analysis</strong></p></li>
<li><p><code>[TABLE]_SOURCE_CONCEPT_ID</code>: concept representation of the source code, <strong>helps maintain tie to raw data</strong></p></li>
<li><p><code>[TABLE]_SOURCE_VALUE</code>: original source code as given in source table, <strong>helps to review data quality</strong></p></li>
</ul>
<p>Way to map a source code to standard code:</p>
<ul>
<li><code>CONCEPT_RELATIONSHIP</code> table</li>
</ul>
</section>
<section id="how-many-concepts-are-in-the-ohdsi-standard-vocabularies" class="slide level2 scrollable">
<h2>How many concepts are in the OHDSI standard vocabularies?</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p><img data-src="figures/all_vocabularies.png" style="width:100.0%"></p>
</div><div class="column" style="width:70%;">
<ul>
<li><p>111 different vocabularies (like ICD-10, RxNorm)</p></li>
<li><p>78 are adopted from external sources (with differing licensing requirements)</p></li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Best ways to interact with the vocabularies</strong></p>
</div>
<div class="callout-content">
<ul>
<li><a href="https://athena.ohdsi.org">ATHENA</a> (link)</li>
<li><a href="https://atlas-demo.ohdsi.org">ATLAS</a> (link) by building concept sets</li>
</ul>
</div>
</div>
</div>
</div></div>
</section>
<section id="to-1-semantic-relationships" class="slide level2">
<h2>1-to-1 semantic relationships</h2>

<img data-src="figures/maps_to.png" class="r-stretch"></section>
<section id="to-n-relationships" class="slide level2">
<h2>1-to-N relationships</h2>

<img data-src="figures/1_to_n_mapping.png" class="r-stretch"><div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Mappings can even across multiple domains</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</section>
<section id="omop-standardized-vocabularies-in-a-nutshell" class="slide level2 scrollable">
<h2>OMOP standardized vocabularies in a nutshell</h2>
<p>What they are:</p>
<ul>
<li><strong>Standardized structure</strong> to house existing vocabularies used in the public domain</li>
<li><strong>Compiled standards</strong> from disparate public and private sources and some OMOP-grown concepts</li>
</ul>
<p>What they are not:</p>
<ul>
<li><strong>Static dataset</strong>: vocabularies update regularly to keep up with the continuous evolution of the sources</li>
<li><strong>Finished product</strong>: vocabulary maintenance and improvement is an ongoing activity that requires community participation and support</li>
</ul>
</section>
<section id="extended-cdm-example-endometriosis" class="slide level2">
<h2>Extended CDM example: endometriosis</h2>
<p>We will walk through the story of Lauren:</p>
<ul>
<li>From the <a href="https://ohdsi.github.io/TheBookOfOhdsi/CommonDataModel.html#running-example-endometriosis">Book of OHDSI</a> (link)</li>
</ul>
</section>
<section id="vocabulary-exercises" class="slide level2">
<h2>Vocabulary exercises</h2>
<p>Using <a href="https://athena.ohdsi.org" class="uri">https://athena.ohdsi.org</a>, find standard concept IDs for the following conditions:</p>
<ul>
<li>Asthma</li>
<li>Plague</li>
<li>Ingrown toenail</li>
</ul>
<p>Final standard concept IDs for the following drug ingredients:</p>
<ul>
<li>Metformin</li>
<li>Tolazamid</li>
<li>Telmisartan</li>
</ul>
</section>
<section id="vocabulary-exercises-with-solutions" class="slide level2">
<h2>Vocabulary exercises (with solutions)</h2>
<p>Using <a href="https://athena.ohdsi.org" class="uri">https://athena.ohdsi.org</a>, find standard concept IDs for the following conditions:</p>
<ul>
<li>Asthma (<code>317009</code>)</li>
<li>Plague (<code>434271</code>)</li>
<li>Ingrown toenail (<code>4065236</code>, <code>4290993</code>)</li>
</ul>
<p>Final standard concept IDs for the following drug ingredients:</p>
<ul>
<li>Metformin (<code>1503297</code>)</li>
<li>Tolazamid (<code>1502809</code>)</li>
<li>Telmisartan (<code>1317640</code>)</li>
</ul>
</section>
<section id="some-more-exercises" class="slide level2">
<h2>Some more exercises</h2>
<ul>
<li><p>What is the standard concept ID for ICD10 code E11.9?</p></li>
<li><p>What is the standard concept ID for the ICD10 code C78.0?</p></li>
<li><p>What ICD10 codes are mapped to the concept ID 443767?</p></li>
<li><p>What is the standard concept ID for the ICD10 code code X67.0?</p></li>
</ul>
</section>
<section id="comparison-of-cdms" class="slide level2">
<h2>Comparison of CDMs</h2>
<p>Balancing trade-offs in data management vs analysis complexity</p>

<img data-src="figures/trade_off.png" class="r-stretch"></section>
<section id="extract-transform-load" class="slide level2 scrollable">
<h2>Extract-transform-load</h2>

<img data-src="figures/etl_steps.png" class="r-stretch"><ul>
<li><p><a href="https://ohdsi.github.io/TheBookOfOhdsi/ExtractTransformLoad.html">Book of OHDSI chapter</a> (link)</p></li>
<li><p><a href="https://pubmed.ncbi.nlm.nih.gov/37952118/">Recent paper on OMOP ETL challenges across Europe</a> (link)</p></li>
<li><p><a href="https://github.com/OHDSI/Tutorial-ETL">Full-day tutorial</a> (link)</p></li>
</ul>
<!-- ::: {.absolute left="55%" top="55%" style="font-size:1.8em; padding: 0.5em 1em; background-color: rgba(255, 255, 255, .5); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;"} -->
<!-- Be Brave -->
<!-- Take Risks -->
<!-- ::: -->
<!-- https://emilhvitfeldt.com/project/slidecraft-101/#blog-posts -->


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="figures/logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Biostat 218 - UCLA - Observational Health Data Sciences and Informatics (OHDSI)</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>